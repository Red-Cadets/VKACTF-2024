## StripTeaser

| Событие | Название | Категория | Сложность |
| :------ | ---- | ---- | ---- |
| VKACTF 2024 | StripTeaser  | Web | medium |

## Описание

>Авторы: [EGM x Po4est]
>
>Описание: Это злачное место в городе похоже на что-то интересное, постить фотки не забывай, чтобы все знали, где ты пропадаешь.

# Решение

1. Регистрируемся. Заходим в создание заметки и видим возможность добавить фон на заметку, вставляем туда webhook и видим, что запрос приходит с python-requests. У заметки появляется фон с ответом от запроса на ```background url```, так мы можем посмотреть содержимое страницы, которую мы указали в качестве фона.
2. С помощью сканера директорий находим ```/admin```, ```/backup```.
3. Можно зайти на ```/admin``` и увидеть кнопку создания бэкапа, которая отправляет запрос на ```/backup``` и выкачивает архив с сорцами проекта.
4. Используя уязвимость ssrf создаем заметку с фоном ```http://127.0.0.1:10026/backup```, заходим на главную страницу и через код элемента ищем название ```png``` файла в который записался ответ от сервера.
5. Переходим на ссылку с картинкой и сохраняем ее на компьютер. После скачивание изменяем расширение с ```.png``` на ```.zip```.
6. Видим ```.git```, смотрим ```git log```  и видим все коммиты этого проекта, откатываемся к версии ```env``` с помощью команды 
```
git checkout c347747fb043d0eac605682484bb3b85c97a1c2b
```
7. Находим файл ```env```, читаем его и находим там флаг.

### Флаг

Получаем наш флаг
```
vka{Str1pSm31lsR3v3ngeFileAndG0ATgit}
```
