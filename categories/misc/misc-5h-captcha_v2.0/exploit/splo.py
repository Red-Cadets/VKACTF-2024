import requests
from bs4 import BeautifulSoup
import pickle

with open("results.pickle", "rb") as file:
    results = pickle.load(file)
s = requests.Session()
for i in range(500):
    print(i)
    response = s.get(f"http://127.0.0.1:21039")
    soup = BeautifulSoup(response.text, "html.parser")
    source_tag = soup.find("source", src=True)
    audio_url = source_tag["src"]
    answer = results[audio_url]
    response = s.post("http://127.0.0.1:21039/solve", data={"answer": answer})
    print(response.text)

print(s.cookies)

response = s.get("http://127.0.0.1:21039")
print(response.text)
