import speech_recognition as sr
import pickle
import hashlib

audio_captchas = [
    f"static/audio_{hashlib.sha256(str(i).encode()).hexdigest()}.wav"
    for i in range(0, 40)
]
results = {}

for audio_file in audio_captchas:
    r = sr.Recognizer()
    with sr.AudioFile(audio_file) as source:
        audio = r.record(source)

    text = str(r.recognize_google(audio, language="en-EN"))
    text = text.replace(" ", "")
    text = text.replace("00", "0")
    results[audio_file] = text
    print(audio_file + ":" + text)


results[
    "static/audio_4e07408562bedb8b60ce05c1decfe3ad16b72230967de01f640b7e4729b49fce.wav"
] = "5936048271"
results[
    "static/audio_535fa30d7e25dd8a49f1536779734ec8286108d115da5045d77f3b4185d8f790.wav"
] = "4396802157"
results[
    "static/audio_ef2d127de37b942baad06145e54b0c619a1f22327b2ebbcfbec78f5564afe39d.wav"
] = "4527316980"
results[
    "static/audio_e29c9c180c6279b0b02abd6a1801c7c04082cf486ec027aa13515e4f3884bb6b.wav"
] = "4062579183"
print(results)

with open("results.pickle", "wb") as file:
    pickle.dump(results, file)
