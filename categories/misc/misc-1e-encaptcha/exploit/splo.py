import requests
from bs4 import BeautifulSoup
import re
import base64

s = requests.Session()
response = s.get("http://217.18.63.123:21033/")

i = 0
while i < 1337:
    try:
        print(i)
        soup = BeautifulSoup(response.text, "html.parser")
        h1_tags = soup.find_all("h1")
        h1_text = h1_tags[1].text
        print(h1_tags[0].text)
        enc_data = h1_text.replace("Solve this: ", "")
        print(enc_data)
        if re.search(r"[#$%&()*~`@><{}?_|!;+^-]", enc_data):
            data = eval(base64.b85decode(enc_data).decode())
            print(f"Base85 {data}")
            response = s.post("http://217.18.63.123:21033/", data={"answer": data})
        elif re.search(r"[a-z]", enc_data):
            data = eval(base64.b64decode(enc_data).decode())
            print(f"Base64 {data}")
            response = s.post("http://217.18.63.123:21033/", data={"answer": data})
        elif re.search(r"G[A-Z]*|=", enc_data):
            data = eval(base64.b32decode(enc_data).decode())
            print(f"Base32 {data}")
            response = s.post("http://217.18.63.123:21033/", data={"answer": data})
        else:
            data = eval(base64.b16decode(enc_data).decode())
            print(f"Base16 {data}")
            response = s.post("http://217.18.63.123:21033/", data={"answer": data})
        i += 1
    except:
        response = s.get("http://217.18.63.123:21033/")
        continue

print(s.cookies)
response = s.get("http://217.18.63.123:21033/")
print(response.text)
